# Инструкция для Plazma агента

## Краткое описание

Настроить интеграцию между Plazma и Vital для отображения товаров из каталога Plazma в секции "Рекомендуем" на странице Vital.

## Основные шаги

### 1. Добавить API ключ в Railway Plazma
- Переменная: `EXTERNAL_API_KEY`
- Значение: `838167d1702e25d4d0c97a5db2ccc25727c2342bf025f08858e19b0388ffc0de`

### 2. Проверить переменные в Railway Vital
- `PLAZMA_API_KEY` = `838167d1702e25d4d0c97a5db2ccc25727c2342bf025f08858e19b0388ffc0de`
- `PLAZMA_API_URL` = `https://plazma-production.up.railway.app/api/external`

### 3. Перезапустить проект Plazma

### 4. Протестировать API
```bash
curl -X GET "https://plazma-production.up.railway.app/api/external/catalog" \
  -H "X-API-Key: 838167d1702e25d4d0c97a5db2ccc25727c2342bf025f08858e19b0388ffc0de"
```

### 5. Проверить отображение на Vital
- Открыть: https://vital-production-82b0.up.railway.app/webapp
- Проверить секцию "Рекомендуем"

## Подробные инструкции

- **[Полное техническое задание](TASK_FOR_PLAZMA_AGENT.md)** — детальная инструкция с решением проблем
- **[Быстрый чеклист](QUICK_CHECKLIST.md)** — 5 шагов для быстрой настройки
- **[Текстовая версия](ЗАДАНИЕ_ДЛЯ_ПЛАЗМА.txt)** — простая текстовая инструкция

## Документация API

Полная документация API находится в: `docs/EXTERNAL_API.md`

## Время выполнения

~15-20 минут

## Что уже сделано

✅ Создан внешний API роутер (`src/api/external.ts`)  
✅ Настроен Prisma клиент  
✅ Добавлена поддержка переменной окружения  
✅ Роутер подключен к серверу  
✅ Улучшена обработка ошибок в Vital frontend  
✅ Все изменения в git (коммит 396ff99)  

## Критерии успеха

✅ API возвращает каталог товаров (не 401)  
✅ Товары отображаются в секции "Рекомендуем" на Vital  
✅ Нет ошибок в консоли браузера  

